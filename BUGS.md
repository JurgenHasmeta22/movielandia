# ğŸ› Bug Tracker

This document tracks known bugs and issues in MovieLandia24.

---

## âœ… Bug #1: Unique ID Constraint Error on Review Creation - FIXED

**Status:** âœ… Resolved  
**Severity:** Critical  
**Date Reported:** January 30, 2026  
**Date Resolved:** January 30, 2026

### Description

Users encountered a Prisma unique constraint error when attempting to create reviews for various entities. The error manifested differently based on authentication method and entity type.

### Root Cause

The review creation functions (`addReviewSeason`, `addReviewEpisode`, `addReviewActor`, `addReviewCrew`) were using `Prisma.*ReviewCreateManyInput` types instead of custom interfaces. These Prisma types include the `id` field, which is auto-incremented by the database. When an `id` value was accidentally passed or generated, it could conflict with existing database IDs, causing the unique constraint violation on the primary key.

### The Fix

Created proper TypeScript interfaces that exclude the `id` field:
- `AddReviewSeasonParams`
- `AddReviewEpisodeParams`
- `AddReviewActorParams`
- `AddReviewCrewParams`

Updated all affected review creation functions to use these new interfaces instead of `Prisma.*ReviewCreateManyInput` types. This ensures the `id` field is never passed to Prisma and is always auto-generated by the database.

### Files Modified

- [src/actions/user/user.actions.ts](src/actions/user/user.actions.ts) - Added new interface definitions
- [src/actions/user/userReviews.actions.ts](src/actions/user/userReviews.actions.ts) - Updated function signatures

### Observations

- âœ… Bookmarks/favorites worked correctly (not affected)
- âœ… Movie/Serie reviews worked (already using proper interfaces)
- âŒ Season, Episode, Actor, Crew reviews failed (using wrong Prisma types)
- ğŸ¯ Google OAuth users experienced this more frequently
- ğŸ” Issue was in type definitions allowing `id` field to be passed

---

